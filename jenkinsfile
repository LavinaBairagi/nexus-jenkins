
node {
    stage('Preparation') { // for display purposes
        // Get some code from a GitHub repository
       git 'https://github.com/LavinaBairagi/nexus-jenkins.git'
        
    }
   
    stage('Build') {
                bat "mvn clean test"
    }
    
    stage('Package') {
                bat "mvn package"
    }
      stage('Deploy') {
                bat "mvn deploy"
    }
    
    
   
    
    stage('Nexus') {
       nexusArtifactUploader artifacts: [[artifactId: 'nexus-jenkins',
 classifier: '', file: 'target/nexus-jenkins-0.0.1-SNAPSHOT.war',
 type: 'war']], credentialsId: 'nexus', groupId: 'com.jenkins.nexus', 
nexusUrl: 'localhost:8110', nexusVersion: 'nexus3',
 protocol: 'http', 
repository: 'maven-central-repository',
 version: '0.0.1'    }
 
 stage('Ansible'){
        ansiblePlaybook( credentialsId: 'project-key', disableHostKeyChecking: true, installation: 'ansible', inventory: 'inventory.inv', playbook: 'download.yml')

 }
}
